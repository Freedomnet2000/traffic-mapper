import{r as n,a as d,j as e}from"./app-BqQ65HO9.js";function o({onClose:r}){const[a,l]=n.useState([]);return n.useEffect(()=>{d.get("/admin/failures").then(t=>l(t.data)).catch(t=>console.error("Failed to fetch failures",t))},[]),e.jsxs("div",{className:"mt-6 bg-red-50 border border-red-200 p-4 rounded shadow",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-red-600",children:"❌ Recent Failures"}),e.jsx("button",{onClick:r,className:"text-sm text-red-500 hover:underline",children:"Close"})]}),e.jsx("div",{className:"overflow-auto max-h-96",children:e.jsxs("table",{className:"min-w-full text-sm table-auto",children:[e.jsx("thead",{className:"bg-red-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-1 text-left",children:"Endpoint"}),e.jsx("th",{className:"px-3 py-1 text-left",children:"Action"}),e.jsx("th",{className:"px-3 py-1 text-left",children:"IP"}),e.jsx("th",{className:"px-3 py-1 text-left",children:"Status"}),e.jsx("th",{className:"px-3 py-1 text-left",children:"Params"}),e.jsx("th",{className:"px-3 py-1 text-left",children:"Date"})]})}),e.jsx("tbody",{children:a.map((t,s)=>e.jsxs("tr",{className:"border-t border-red-100 align-top",children:[e.jsx("td",{className:"px-3 py-1",children:t.endpoint}),e.jsx("td",{className:"px-3 py-1",children:t.action}),e.jsx("td",{className:"px-3 py-1",children:t.ip}),e.jsx("td",{className:"px-3 py-1",children:t.status}),e.jsx("td",{className:"px-3 py-1 font-mono text-xs text-gray-700 whitespace-pre-wrap break-all bg-gray-50 rounded",children:e.jsx(x,{paramString:t.params})}),e.jsx("td",{className:"px-3 py-1",children:new Date(t.created_at).toLocaleString()})]},s))})]})})]})}function x({paramString:r}){const[a,l]=n.useState(!1);try{const t=JSON.parse(r),s=JSON.stringify(t,null,2),c=s.length>200?s.slice(0,200)+"...":s;return e.jsxs("div",{className:"relative",children:[e.jsx("pre",{children:a?s:c}),s.length>200&&e.jsx("button",{onClick:()=>l(!a),className:"absolute top-0 right-0 text-blue-500 text-xs hover:underline bg-white/80 px-1",children:a?"Hide":"More"})]})}catch{return e.jsx("span",{children:r||"-"})}}export{o as default};
